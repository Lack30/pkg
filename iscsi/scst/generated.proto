// Copyright 2021 lack
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
// This file was autogenerated by goproto-gen. Do not edit it manually!

syntax = 'proto2';

package github.com.lack_io.pkg.iscsi.scst;

// Package-wide variables from generator "generated".
option go_package = "scst";

// Device scst device
// Example by scst configure /etc/scst.conf:
// 	  DEVICE admin:ahtr {
// 			filename /dev/sdc
// 			size 10737418240
// 	  }
// +gogo:deepcopy-gen=true
// +gogo:genproto=true
message Device {
  // the name of device
  optional string name = 1;

  // the filename of device, the path of block file
  optional string filename = 2;

  // the size of device (unit B)
  optional int64 size = 3;
}

// Driver scst
// 	TARGET_DRIVER iscsi {
// 		enabled 1
//
// 		TARGET iqn.2018-11.com.example:ahtr {
// 			enabled 1
// 			rel_tgt_id 23
//
// 			GROUP ahtr {
// 				LUN 0 ahtr
//
// 				INITIATOR iqn.1991-05.com.microsoft:win-1bp99fqu2ri
// 			}
// 		}
// 	}
// +gogo:deepcopy-gen=true
// +gogo:genproto=true
message Driver {
  // the name of Driver
  optional string name = 1;

  optional int32 enabled = 2;

  // Targets
  map<string, Target> targets = 3;
}

// Group scst resource group
// 	GROUP admin:bsic {
// 		LUN 0 admin:bsic
//
// 		INITIATOR iqn.1991-05.com.microsoft:win-1bp99fqu2ri
// 	}
// +gogo:deepcopy-gen=true
// +gogo:genproto=true
message Group {
  optional string name = 1;

  repeated Lun luns = 2;

  // iscst agent iqn
  repeated string initiators = 3;
}

// Handler scst handler
// Example by scst config /etc/scst.conf:
// 	HANDLER vdisk_blockio {
// 		DEVICE admin:ahtr {
// 			filename /dev/sdc
// 			size 10737418240
// 		}
// 	}
// +gogo:deepcopy-gen=true
// +gogo:genproto=true
message Handler {
  // the name of handler, example vdisk_blockio
  optional string name = 1;

  map<string, Device> devices = 2;
}

// Lun scst logical unit
// +gogo:deepcopy-gen=true
// +gogo:genproto=true
message Lun {
  // the id of lun
  optional int64 id = 1;

  // the name of device
  optional string name = 2;
}

// Target scst
// 	TARGET iqn.2018-11.com.example:bsic {
// 		enabled 1
// 		rel_tgt_id 28
//
// 		GROUP bsic {
// 			LUN 0 bsic
//
// 			INITIATOR iqn.1991-05.com.microsoft:win-1bp99fqu2ri
// 		}
// 	}
// +gogo:deepcopy-gen=true
// +gogo:genproto=true
message Target {
  optional string name = 1;

  optional int32 enabled = 2;

  optional int64 id = 3;

  map<string, Group> groups = 4;

  repeated Lun luns = 5;
}

